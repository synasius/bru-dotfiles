# vim: set filetype=zsh:

modulename=${0}

_mega_download() {
    local baseurl="https://mega.nz/linux/MEGAsync/xUbuntu_19.10/amd64"

    info "Download base package"
    curl -sLo "/tmp/megasync.deb" "${baseurl}/megasync_4.2.5-2.1_amd64.deb"
    info "Download nautilus package"
    curl -sLo "/tmp/nautilus-megasync.deb" "${baseurl}/nautilus-megasync_3.6.6_amd64.deb"
}

mega() {
    if (( $+commands[megasync] )); then
        info "skipping - megasync already installed"
        return
    fi

    _mega_download

    sudo apt-get install "/tmp/megasync.deb"
    sudo apt-get install "/tmp/nautilus-megasync.deb"
}

mega "$@"
